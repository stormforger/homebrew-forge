# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Forge < Formula
  desc "The StormForger Command Line Client, called 'forge'"
  homepage "https://stormforger.com"
  version "0.51.3"

  on_macos do
    if Hardware::CPU.arm?
      url "https://github.com/stormforger/cli/releases/download/v0.51.3/forge_v0.51.3_darwin_arm64.zip"
      sha256 "54b49203d1efd8c40b1c4d5fc38addce6acadfe3af693f4c932dfa47870016b6"

      def install
        bin.install "forge"

        # generate and install bash completion
        output = Utils.safe_popen_read("#{bin}/forge", "completion", "bash")
        (bash_completion/"forge").write output

        # generate and install zsh completion
        output = Utils.safe_popen_read("#{bin}/forge", "completion", "zsh")
        (zsh_completion/"_forge").write output
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/stormforger/cli/releases/download/v0.51.3/forge_v0.51.3_darwin_amd64.zip"
      sha256 "7c666ffa8dbb86943c7d5d994070ee0d55dc06587a40c04e474d453bcfcebf85"

      def install
        bin.install "forge"

        # generate and install bash completion
        output = Utils.safe_popen_read("#{bin}/forge", "completion", "bash")
        (bash_completion/"forge").write output

        # generate and install zsh completion
        output = Utils.safe_popen_read("#{bin}/forge", "completion", "zsh")
        (zsh_completion/"_forge").write output
      end
    end
  end

  on_linux do
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/stormforger/cli/releases/download/v0.51.3/forge_v0.51.3_linux_arm64.tar.gz"
      sha256 "301967b1955cfab33e18d05a090a18f0aa616ed387d9b77a8d8203ca860a3f7c"

      def install
        bin.install "forge"

        # generate and install bash completion
        output = Utils.safe_popen_read("#{bin}/forge", "completion", "bash")
        (bash_completion/"forge").write output

        # generate and install zsh completion
        output = Utils.safe_popen_read("#{bin}/forge", "completion", "zsh")
        (zsh_completion/"_forge").write output
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/stormforger/cli/releases/download/v0.51.3/forge_v0.51.3_linux_amd64.tar.gz"
      sha256 "47817466f632bae74ca976662776a82879fb823339e43d2b9b63f8c585f4150c"

      def install
        bin.install "forge"

        # generate and install bash completion
        output = Utils.safe_popen_read("#{bin}/forge", "completion", "bash")
        (bash_completion/"forge").write output

        # generate and install zsh completion
        output = Utils.safe_popen_read("#{bin}/forge", "completion", "zsh")
        (zsh_completion/"_forge").write output
      end
    end
  end
end
